# TimeLapse-Desk
TimeLapse@Desk（工位时光流逝）

我在网上发现了一个很有趣的项目，就是打工人或者是研究生，每天到工位上的时候，自动调用摄像头给自己拍张照片，然后时间久了，就能剪辑成一个视频。

## 项目目标
1. 使用Python完成；
2. 实现无感触发实现自动拍照和后续的处理；
3. 自动拍照，以时间来命名保存，并处理；
4. 除了保存的原图之外，此外还会自动检测人脸关键点（这里可以使用深度学习人脸关键点检测的模型，尽可能的要实时），然后处理照片，以人脸放在中间，调整图像。这样就能让之的人脸对齐，便于制作延时视频。

## Demo 快速开始

现在已经有了一个功能完整的demo！

### 🚀 一键运行

**双击 `run_timelapse.bat`** - 全自动化！
- 自动激活conda环境
- 自动安装依赖包
- 自动拍摄1920*1080高清照片
- 自动进行人脸对齐处理
- 完成后自动退出

### 🔧 手动运行

```bash
# 激活conda环境
conda activate dev

# 运行程序
python timelapse_demo.py
```

### 📁 文件说明

- **`timelapse_demo.py`** - 主程序，实现拍照和人脸对齐
- **`test_system.py`** - 系统测试脚本，检查摄像头和依赖
- **`run_timelapse.bat`** - 一键运行批处理文件
- **`requirements.txt`** - Python依赖包列表
- **`USAGE.md`** - 详细使用说明

### ✨ 主要功能

- ✅ **高清拍照**：1920*1080分辨率，充分利用摄像头最大能力
- ✅ **人脸检测**：使用MediaPipe检测人脸关键点  
- ✅ **精准对齐**：眼睛中心对齐到固定位置，不缩放保持画质
- ✅ **智能填充**：超出部分裁切，空白部分黑色填充
- ✅ **全自动化**：一键运行，10帧预热+1秒稳定，确保最佳质量
- ✅ **双重保存**：原始照片 + 对齐照片（均为1920*1080）
- 🔧 **摄像头优化**：自动检测并应用最佳参数设置

### 📸 拍照效果

程序会创建两个文件夹，均为1920*1080分辨率：
- `photos/` - 原始拍摄照片
- `aligned_photos/` - 人脸对齐照片（眼睛中心固定，无缩放，用于延时视频）

### 🎬 制作延时视频

收集足够照片后，使用FFmpeg制作视频：

```bash
ffmpeg -framerate 10 -pattern_type glob -i "aligned_photos/*.jpg" -c:v libx264 -pix_fmt yuv420p timelapse.mp4
```

详细使用说明请查看 [`USAGE.md`](USAGE.md)